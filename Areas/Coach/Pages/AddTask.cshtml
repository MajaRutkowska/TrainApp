@page
@using TrainApp.Areas.Coach.Pages
@model AddTaskModel;
@{
    ViewData["Title"] = "Assign Coach";
}

<head>
    <link rel="stylesheet" href="/css/site.css" />
</head>

<body class="ur-body">


    <h2 class="title">Dodaj zdanie</h2>
    <form method="post" id="addTaskForm">

        <div class="form-group">
            <label><strong>Dodaj zadanie dla:</strong></label><br />
            <input type="radio" id="forTeam" name="taskType" value="Team" onclick="toggleSelection()" />
            <label for="forTeam">Drużyny</label>
            <br />
            <input type="radio" id="forPlayer" name="taskType" value="Player" onclick="toggleSelection()" />
            <label for="forPlayer">Zawodnika</label>
        </div>


        <div class="form-group" id="teamSelection" style="display: none;">
            <label for="teamId">Wybierz drużynę:</label>
            <select id="teamId" name="SelectedTeamId" class="form-control">
                <option value="">-- Wybierz drużynę --</option>
                @foreach (var team in Model.Teams)
                {
                <option value="@team.TeamId">@team.TeamName</option>
                }
            </select>
        </div>


        <div class="form-group" id="playerSelection" style="display: none;">
            <label for="playerId">Wybierz zawodnika:</label>
            <select id="playerId" name="SelectedPlayerId" class="form-control">
                <option value="">-- Wybierz zawodnika --</option>
                @foreach (var player in Model.Players)
                {
                <option value="@player.Id">@player.Name @player.Surname</option>
                }
            </select>
        </div>

        <div class="form-group">
            <label for="taskTitle">Tytuł zadania:</label>
            <textarea id="tasktitlen" name="taskTitle" class="form-control" rows="1"></textarea>
        </div>
        <div class="form-group">
            <label for="taskDescription">Opis zadania:</label>
            <textarea id="taskDescription" name="taskDescription" class="form-control" rows="4"></textarea>
        </div>


        <button type="submit" class="btn btn-primary">Dodaj zadanie</button>
    </form>

    <script>
        function toggleSelection() {
            const forTeam = document.getElementById("forTeam").checked;
            const forPlayer = document.getElementById("forPlayer").checked;

            document.getElementById("teamSelection").style.display = forTeam ? "block" : "none";
            document.getElementById("playerSelection").style.display = forPlayer ? "block" : "none";
        }
    </script>
    <a href="/Index" class="buttonR-small btn-primary">Powrót</a>
    </div>
</body>
@if (TempData["ErrorMessage"] != null)
{
<script>
        var errorMessage = '@Html.Raw(TempData["ErrorMessage"]?.ToString())';
        alert(errorMessage);
</script>
}